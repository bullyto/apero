<!doctype html>
<html lang="fr" data-status-boot="1" data-status-url="https://bullyto.github.io/outil/apps/status/status.json">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="application-name" content="Ap√©ro de Nuit 66">
  <meta name="apple-mobile-web-app-title" content="Ap√©ro de Nuit 66">
<title>Ap√©ro de Nuit 66 ‚Äî Livraison d‚Äôalcool de nuit √† Perpignan (66)</title>
  <!-- ‚úÖ SEO / R√©f√©rencement (sans impact visuel) -->
  <link rel="canonical" href="https://www.aperos.net/">
  <meta name="description" content="Livraison d‚Äôalcool de nuit √† Perpignan et dans les Pyr√©n√©es-Orientales (66). Commande rapide, service nocturne. R√©serv√© aux majeurs.">
  <meta name="keywords" content="apero de nuit, livraison alcool de nuit, apero catalan, apero after night, livraison alcool perpignan, livraison ap√©ro 66, pyr√©n√©es-orientales, 66000, livraison boissons de nuit">

  <meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1">
  <meta name="googlebot" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:locale" content="fr_FR">
  <meta property="og:site_name" content="Ap√©ro de Nuit 66">
  <meta property="og:title" content="Ap√©ro de Nuit 66 ‚Äî Livraison d‚Äôalcool de nuit √† Perpignan (66)">
  <meta property="og:description" content="Livraison d‚Äôalcool de nuit √† Perpignan et dans les Pyr√©n√©es-Orientales (66). Commande rapide, service nocturne. R√©serv√© aux majeurs.">
  <meta property="og:url" content="https://www.aperos.net/">
  <meta property="og:image" content="https://www.aperos.net/assets/og-image-1200x630.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Ap√©ro de Nuit 66 ‚Äî Livraison d‚Äôalcool de nuit √† Perpignan (66)">
  <meta name="twitter:description" content="Livraison d‚Äôalcool de nuit √† Perpignan et dans les Pyr√©n√©es-Orientales (66). Commande rapide, service nocturne. R√©serv√© aux majeurs.">
  <meta name="twitter:image" content="https://www.aperos.net/assets/og-image-1200x630.jpg">

  <!-- SEO Local -->
  <meta name="geo.region" content="FR-66">
  <meta name="geo.placename" content="Perpignan">
  <meta name="ICBM" content="42.6887,2.8948">

  <!-- Performance -->
  <link rel="preconnect" href="https://raw.githubusercontent.com" crossorigin>
  <link rel="dns-prefetch" href="//raw.githubusercontent.com">

  <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "Ap√©ro de Nuit 66",
  "url": "https://www.aperos.net/",
  "image": "https://www.aperos.net/assets/og-image-1200x630.jpg",
  "telephone": "+33 6 52 33 64 61",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Perpignan",
    "addressRegion": "Occitanie",
    "postalCode": "66000",
    "addressCountry": "FR"
  },
  "areaServed": [
    "Perpignan",
    "Pyr√©n√©es-Orientales",
    "66"
  ],
  "serviceType": "Livraison de boissons",
  "description": "Livraison d‚Äôalcool de nuit de 19h √† 6h √† Perpignan et dans les Pyr√©n√©es-Orientales (66). Commande rapide, service nocturne. R√©serv√© aux majeurs.",
  "openingHoursSpecification": [
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": [
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
        "Sunday"
      ],
      "opens": "19:00",
      "closes": "06:00"
    }
  ]
}
  </script>


  <!-- ‚úÖ PWA -->
  <link rel="manifest" href="./manifest.webmanifest?v=20260101">
  <meta name="theme-color" content="#0b1c2d">
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png?v=20260101">
  <link rel="icon" type="image/png" sizes="192x192" href="assets/icon-192.png?v=20260101">
  <link rel="icon" type="image/png" sizes="512x512" href="assets/icon-512.png?v=20260101">

  <!-- Pr√©chargement -->
  <link rel="preload" as="image" href="assets/logo-header.png">
  <link rel="preload" as="image" href="assets/bottle1.png">
  <link rel="preload" as="image" href="assets/bottle2.png">
  <link rel="preload" as="image" href="assets/bottle3.png">
  <link rel="preload" as="image" href="assets/bottle4.png">
  <link rel="preload" as="image" href="assets/bottle5.png">
  <link rel="preload" as="image" href="assets/bottle6.png">
  <link rel="preload" as="image" href="assets/bottle7.png">

  <style>
    :root{ --blue:#0b1c2d; --sky:#5db7ee; --text:#0b1c2d; }
    *{box-sizing:border-box}

    body{
      margin:0; min-height:100dvh; display:flex; flex-direction:column;
      padding-bottom: calc(24px + env(safe-area-inset-bottom));
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:#fff; color:var(--text); overflow-x:hidden; overflow-y:hidden;
    }

    /* =========================
       ‚è≥ SPLASH LOADER (2.5s)
       (Ajout√©, ne supprime rien)
       ========================= */
    #splashLoader{
      position:fixed; inset:0;
      display:flex; align-items:center; justify-content:center;
      background:#0b1c2d;
      z-index:900000; /* sous status overlay (999999), au-dessus du reste */
      padding:24px;
    }
    #splashLoader.hide{
      opacity:0;
      pointer-events:none;
      transition:opacity .30s ease;
    }
    #splashBox{
      width:min(520px, 92vw);
      text-align:center;
      color:#fff;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    }
    #splashTitle{
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      font-size:13px;
      opacity:.80;
      margin:0;
    }
    #splashBrand{
      margin:10px 0 18px;
      font-size:26px;
      font-weight:950;
    }
    #splashBar{
      height:14px;
      border-radius:999px;
      background:rgba(255,255,255,.12);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.18);
    }
    #splashFill{
      height:100%;
      width:0%;
      border-radius:999px;
      background:#5db7ee;
    }
    #splashHint{
      margin:12px 0 0;
      font-size:13px;
      font-weight:800;
      opacity:.70;
    }

    /* HEADER */
    .top{background:var(--blue);padding-bottom:8px}
    .top img{width:100%;max-height:26vh;object-fit:contain;display:block}

    /* TITRE */
    .mid{text-align:center;padding:18px 14px 6px}
    .mid h1{margin:0;font-size:clamp(26px,6vw,40px);color:var(--sky);font-weight:900}
    .brand66{position:relative;display:inline-block}
    .brand66 .reg{position:absolute;top:-0.2em;right:-0.4em;font-size:1em;font-weight:800}

    /* ZONE BOUTEILLES */
    .stage{flex:1;display:flex;justify-content:center;padding:12px}
    .bottleWrap{
      position:relative;width:min(520px,96vw);min-height:60vh;
      display:flex;justify-content:center;align-items:flex-start;
    }
    .bottleWrap img{
      position:absolute;max-height:56vh;max-width:100%;width:auto;
      opacity:0;transition:opacity .4s ease;
      -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%);
      mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%);
      -webkit-mask-size: 100% 100%;
      mask-size: 100% 100%;
    }
    .bottleWrap img.active{opacity:1}

    /* BOUTONS */
    .btnStack{
      position:fixed;left:50%;top:65%;transform:translate(-50%,-50%);
      width:min(420px,86vw);z-index:50;
      display:flex;flex-direction:column;gap:12px;align-items:center;
    }
    .btnStack .btn + .btn{margin-top:0}
    .btn{
      width:100%;border:none;border-radius:16px;padding:14px;
      font-size:18px;font-weight:900;cursor:pointer;
      position:relative;
    }
    .btn + .btn{margin-top:10px}
    .btn.primary{background:var(--sky);color:#fff}
    .btn.secondary{background:rgba(255,255,255,.85);color:#0b1c2d;border:1px solid rgba(11,28,45,.25)}

    /* Pulse */
    @keyframes pulseAdd {
      0%   { box-shadow: 0 0 0 0 rgba(93,183,238,.45); transform: translateY(0); }
      60%  { box-shadow: 0 0 0 16px rgba(93,183,238,0); }
      100% { box-shadow: 0 0 0 0 rgba(93,183,238,0); }
    }
    .btn.secondary.pulse { animation: pulseAdd 2.6s infinite; }

    /* Badge "Nouveau" */
    .badge-new{
      position:absolute;
      top:-8px;
      right:-8px;
      background:var(--sky);
      color:#fff;
      font-size:11px;
      font-weight:950;
      padding:4px 8px;
      border-radius:999px;
      box-shadow:0 10px 22px rgba(93,183,238,.45);
      letter-spacing:.2px;
      border:2px solid rgba(255,255,255,.85);
      pointer-events:none;
    }

    /* MODALE */
    .modal{
      position:fixed;inset:0;display:none;align-items:center;justify-content:center;
      padding:18px;background:rgba(0,0,0,.55);z-index:999;
    }
    .modal.open{display:flex}
    .sheet{
      width:min(520px,94vw);background:#fff;border-radius:22px;
      box-shadow:0 18px 60px rgba(0,0,0,.25);padding:18px 16px 14px;
    }
    .sheetHead{display:flex;gap:12px;margin-bottom:8px;align-items:flex-start}
    .sheetIcon{
      width:40px;height:40px;border-radius:14px;display:flex;align-items:center;justify-content:center;
      background:rgba(93,183,238,.18);font-size:20px;
    }
    .sheet h3{margin:0;font-size:18px;color:var(--blue);line-height:1.2}
    .sheet p{margin:10px 0;color:rgba(0,0,0,.75);font-size:14px;line-height:1.35}
    .step{
      background:rgba(11,28,45,.06);border:1px solid rgba(11,28,45,.08);
      border-radius:16px;padding:10px 12px;margin:10px 0;font-size:14px;line-height:1.35;
    }
    .modalActions{display:flex;gap:14px;justify-content:flex-end;margin-top:14px;flex-wrap:wrap}
    .okBtn,.copyBtn{border:none;border-radius:14px;padding:12px 16px;font-weight:900;cursor:pointer;}
    .okBtn{background:var(--sky);color:#fff;min-width:110px}
    .copyBtn{background:rgba(93,183,238,.18);color:var(--blue)}
    .copied{font-size:13px;color:#1b7f2a;margin-top:6px;display:none}

    /* TOAST */
    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%) translateY(20px);
      opacity:0;
      pointer-events:none;
      background:rgba(11,28,45,.92);
      color:#fff;
      padding:12px 14px;
      border-radius:14px;
      box-shadow:0 18px 60px rgba(0,0,0,.25);
      z-index:1000;
      transition:opacity .25s ease, transform .25s ease;
      font-weight:900;
      font-size:14px;
      width:min(520px, 92vw);
      text-align:center;
    }
    .toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

    /* =========================
       üîû AGE GATE
       ========================= */
    .ageOverlay{
      position:fixed; inset:0;
      display:none;
      align-items:center; justify-content:center;
      padding:18px;
      z-index:5000;
      background: rgba(0,0,0,.62);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    .ageOverlay.show{display:flex;}

    .ageCard{
      width:min(560px, 94vw);
      border-radius:22px;
      background: linear-gradient(180deg, rgba(20,35,56,.94), rgba(10,20,33,.94));
      border:1px solid rgba(255,255,255,.12);
      box-shadow:0 30px 80px rgba(0,0,0,.55);
      overflow:hidden;
      color:#fff;
    }
    .ageTop{
      padding:16px 18px 12px;
      display:flex; align-items:center; justify-content:space-between; gap:14px;
      border-bottom:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.02);
    }
    .ageBrand{
      display:flex; align-items:center; gap:14px; min-width:0;
    }
    .ageBadge{
      width:34px;height:34px;border-radius:12px;
      display:grid;place-items:center;
      background: rgba(93,183,238,.18);
      border:1px solid rgba(93,183,238,.30);
      font-weight:950;color:#5db7ee;
      flex:0 0 auto;
    }
    .ageBrand b{
      letter-spacing:.12em;
      text-transform:uppercase;
      font-size:14px;
      color:rgba(255,255,255,.88);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .ageBody{padding:18px;}
    .ageTitle{margin:6px 0 10px;font-size:28px;line-height:1.1;font-weight:950}
    .ageLead{margin:0 0 14px;color:rgba(255,255,255,.74);line-height:1.45;font-size:15px}
    .ageNotice{
      margin:14px 0 18px;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.88);
      font-size:14px;
      line-height:1.35;
    }
    .ageBtns{display:grid; gap:14px; margin-top:10px;}
    .ageBtn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(19,36,59,.90);
      color:#fff;
      padding:14px 14px;
      border-radius: 14px;
      cursor:pointer;
      font-weight:950;
      font-size:15px;
    }
    .ageBtnPrimary{
      background: linear-gradient(180deg, rgba(40,199,111,1), rgba(24,160,86,1));
      border-color: rgba(40,199,111,.55);
      box-shadow: 0 14px 40px rgba(40,199,111,.22);
    }
    .ageBtnSecondary{
      background: rgba(255,255,255,.05);
      border-color: rgba(255,255,255,.12);
      color: rgba(255,255,255,.92);
    }
    .ageFine{
      margin:12px 0 0;
      color: rgba(255,255,255,.60);
      font-size:12.5px;
      line-height:1.35;
      text-align:center;
    }
    .ageFine a{color:#5db7ee; text-decoration:none; font-weight:900;}
    .ageFine a:hover{text-decoration:underline;}

    /* =========================
       ‚úÖ Anti-flash status admin (FOUC)
       IMPORTANT: ton status-popup.js utilise adStatusOverlay
       ========================= */
    html[data-status-boot="1"] #adStatusOverlay,
    html[data-status-boot="1"] .adStatusOverlay{
      display:none !important;
      opacity:0 !important;
      visibility:hidden !important;
    }

    /* (on garde tes anciens s√©lecteurs, √ßa ne g√™ne pas) */
    html[data-status-boot="1"] .statusOverlay,
    html[data-status-boot="1"] #statusOverlay,
    html[data-status-boot="1"] .statusModal,
    html[data-status-boot="1"] #statusModal,
    html[data-status-boot="1"] .status-popup,
    html[data-status-boot="1"] #statusPopup{
      display:none !important;
      opacity:0 !important;
      visibility:hidden !important;
    }
  
    /* Discreet legal footer */
    .legal-footer{
      max-width: 980px;
      margin: 18px auto 28px;
      padding: 0 16px;
      text-align:center;
      font-size: 12px;
      opacity: .65;
    }
    .legal-footer a{
      color: rgba(232,240,255,.85);
      text-decoration: none;
    }
    .legal-footer a:active{ opacity:.8; }
    .legal-footer .sep{ margin: 0 8px; opacity:.6; }

    /* ADN66 ‚Äî Menu top-right + footer legal (discret) */
    .adn-menu-btn{
      position:fixed;
      top: calc(19vh + 10px); /* ‚úÖ sous le logo (max-height:26vh), n‚Äôempi√®te jamais */
      right:14px;
      z-index:9999;
      padding:9px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.22);
      background:rgba(10,18,30,.55);
      color:#fff;
      font-weight:800;
      letter-spacing:.2px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow:0 10px 30px rgba(0,0,0,.25);
      cursor:pointer;
      overflow:hidden;
      isolation:isolate; /* garantit les z-index internes */
    }

    .adn-menu-label{
      position:relative;
      z-index:3;
    }

    /* ‚ú® Reflet lumineux blanc (toutes les 2s) */
    .adn-menu-btn::before{
      content:"";
      position:absolute;
      inset:-3px;
      border-radius:inherit;
      background:conic-gradient(
        from 0deg,
        transparent 0deg,
        rgba(255,255,255,0.95) 55deg,
        transparent 120deg
      );
      opacity:0;
      pointer-events:none;
      animation:adnGlowSpin 2s infinite;
      z-index:1;
    }

    /* masque int√©rieur pour ne garder que l‚Äôeffet sur les bords */
    .adn-menu-btn::after{
      content:"";
      position:absolute;
      inset:2px;
      border-radius:inherit;
      background:rgba(10,18,30,.55);
      pointer-events:none;
      z-index:2;
    }

    @keyframes adnGlowSpin{
      0%   {opacity:0; transform:rotate(0deg);}
      8%   {opacity:1;}
      45%  {opacity:1; transform:rotate(360deg);}
      60%  {opacity:0;}
      100% {opacity:0; transform:rotate(360deg);}
    }
    .adn-menu-btn:active{ transform:translateY(1px); }

    .adn-menu-backdrop{
      position:fixed; inset:0;
      background:rgba(0,0,0,.28);
      z-index:9998;
      opacity:0; pointer-events:none;
      transition:opacity .18s ease;
    }
    .adn-menu-backdrop.open{ opacity:1; pointer-events:auto; }

    .adn-menu-sheet{
      position:fixed;
      top:56px; right:14px;
      width:min(290px, calc(100vw - 28px));
      z-index:9999;
      background:rgba(9,14,22,.94);
      color:#fff;
      border:1px solid rgba(255,255,255,.12);
      border-radius:18px;
      box-shadow:0 18px 55px rgba(0,0,0,.45);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      padding:6px;
      transform:translateY(-8px);
      opacity:0;
      pointer-events:none;
      transition:opacity .18s ease, transform .18s ease;
    }
    .adn-menu-sheet.open{
      opacity:1;
      transform:translateY(0);
      pointer-events:auto;
    }

    /* Item layout */
    .adn-menu-item{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      padding:11px 12px;
      border-radius:14px;
      font-weight:800;
      user-select:none;
    }
    /* ‚úÖ delimitation between each button */
    .adn-menu-item + .adn-menu-item{
      border-top:1px solid rgba(255,255,255,.10);
      margin-top:2px;
      padding-top:13px;
    }
    .adn-menu-item:hover{ background:rgba(255,255,255,.06); }
    .adn-menu-item:active{ background:rgba(255,255,255,.10); }

    .adn-menu-left{ min-width:0; display:flex; flex-direction:column; gap:2px; }
    .adn-menu-title{ font-size:15px; line-height:1.1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.adn-menu-sub{
  font-size:10px;          /* l√©g√®rement plus petit */
  font-weight:750;
  color:rgba(255,255,255,.72);
  line-height:1;        /* texte plus compact */
  margin-top:-7px;         /* remonte le sous-texte vers le titre */
  white-space:nowrap; 
  overflow:hidden; 
  text-overflow:ellipsis;
}



    /* ADN66 ‚Äî Ic√¥nes image menu (remplace les emojis) */
    .adn-menu-item{
      --adn-icon:48px;
      --adn-gap:14px;
    }
    .adn-menu-title{
      display:flex;
      align-items:center;
      gap:var(--adn-gap);
      line-height:1.15;
    }
    .adn-menu-icon{
      width:var(--adn-icon);
      height:var(--adn-icon);
      object-fit:contain;
      flex:0 0 auto;
      background:transparent;
      box-shadow:none;
      filter:none;
    }
    /* Sous-texte align√© sous le libell√© (pas sous l‚Äôic√¥ne) */
    .adn-menu-sub{
      margin-left: calc(var(--adn-icon) + var(--adn-gap));
    }
    /* Ic√¥nes sp√©cifiques */
    .adn-menu-icon.cadeaux{ width:calc(var(--adn-icon) + 6px); height:calc(var(--adn-icon) + 6px); }
    .adn-menu-icon.caddie{ width:calc(var(--adn-icon) + 2px); height:calc(var(--adn-icon) + 2px); }

    /* ic√¥ne cadeaux un peu plus grande */
    .adn-menu-icon.cadeaux{
      width:54px;
      height:54px;
    }

    /* ic√¥ne caddie l√©g√®rement plus grande */
    .adn-menu-icon.caddie{
      width:50px;
      height:50px;
    }

    .adn-tag{
      font-size:11px;
      font-weight:950;
      padding:4px 9px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.20);
      color:rgba(255,255,255,.95);
      background:rgba(93,183,238,.22);
      flex:0 0 auto;
      letter-spacing:.2px;
    }

    .adn-legal-footer{
      position:fixed;
      left:0; right:0;
      bottom: calc(10px + env(safe-area-inset-bottom));
      padding:6px 10px;
      text-align:center;
      font-size:12px;
      opacity:.55;
      z-index:55;
      pointer-events:auto;
    }
    .adn-legal-footer a{
      color:inherit;
      text-decoration:none;
      border-bottom:1px dotted rgba(0,0,0,.0);
    }
    .adn-legal-footer a:active{ opacity:.8; }
    .adn-legal-footer .dot{ margin:0 6px; opacity:.6; }

</style>

  <link rel="preconnect" href="https://bullyto.github.io" crossorigin>
  <link rel="dns-prefetch" href="https://bullyto.github.io">

  <link rel="preload" as="script" href="./status-popup.js?v=20260101a">
  <script>
    // ‚úÖ d√©marre en "boot" : on cache toute popup status tant que status-popup.js n'a pas d√©cid√©
    document.documentElement.setAttribute("data-status-boot","1");
  </script>
  <script>
  // ‚úÖ PATCH STATUS: force la PWA √† lire /outil/apps/status/status.json (et plus l'ancien repo /status)
  (function(){
    var NEW_STATUS_URL = "https://bullyto.github.io/outil/apps/status/status.json";
    // Expose/compat
    window.AD_STATUS_URL = NEW_STATUS_URL;
    window.AD_STATUS_JSON_URL = NEW_STATUS_URL;
    window.STATUS_URL = NEW_STATUS_URL;
    window.STATUS_JSON_URL = NEW_STATUS_URL;
    window.statusJsonUrl = NEW_STATUS_URL;
    try { document.documentElement.setAttribute('data-status-url', NEW_STATUS_URL); } catch(e) {}

    // Interception fetch() pour r√©√©crire toute requ√™te vers l'ancien status.json
    var _fetch = window.fetch ? window.fetch.bind(window) : null;
    if (_fetch) {
      window.fetch = function(input, init){
        try {
          var url = (typeof input === 'string') ? input : (input && input.url ? input.url : '');
          if (url) {
            var u = url;
            // Remplace plusieurs variantes connues de l'ancien status
            if (u.indexOf('bullyto.github.io/status/status.json') !== -1) u = NEW_STATUS_URL;
            if (u.indexOf('raw.githubusercontent.com/bullyto/status') !== -1) u = NEW_STATUS_URL;
            // Si quelqu‚Äôun appelle /status.json en relatif, on le force aussi
            if (/\/status\.json(\?|$)/i.test(u) && u.indexOf('/outil/apps/status/status.json') === -1) u = NEW_STATUS_URL;
            if (u !== url) {
              if (typeof input === 'string') input = u;
              else if (input && input.url) input = new Request(u, input);
            }
          }
        } catch(e) {}
        return _fetch(input, init);
      };
    }
  })();
</script>
<script defer src="./status-popup.js?v=20260101a"></script>
</head>

<body>

  <!-- =========================
       ‚è≥ SPLASH LOADER (AJOUT)
       ========================= -->
  <div id="splashLoader" aria-hidden="true">
    <div id="splashBox">
      <div id="splashTitle">Chargement</div>
      <div id="splashBrand">AP√âRO DE NUIT 66¬Æ</div>
      <div id="splashBar"><div id="splashFill"></div></div>
      <div id="splashHint">Pr√©paration de l‚Äôexp√©rience‚Ä¶</div>
    </div>
  </div>

  <header class="top">
    <img src="assets/logo-header.png" alt="">
  </header>

  <section class="mid">
    <h1>AP√âRO DE NUIT <span class="brand66">66<span class="reg">¬Æ</span></span></h1>
  </section>

  <main class="stage">
    <div class="bottleWrap" id="bottles">
      <img src="assets/bottle1.png" class="active" alt="">
      <img src="assets/bottle2.png" alt="">
      <img src="assets/bottle3.png" alt="">
      <img src="assets/bottle4.png" alt="">
      <img src="assets/bottle5.png" alt="">
      <img src="assets/bottle6.png" alt="">
      <img src="assets/bottle7.png" alt="">

      <div class="btnStack">
        <!-- ‚úÖ ACTION PRINCIPALE: commande en ligne (Play Store OK) -->
        <button class="btn primary" id="orderBtn" data-order>Commandez en ligne</button>

        <button class="btn secondary pulse" id="installBtn" style="display:none">
          T√©l√©charger l‚Äôapp
          <span class="badge-new" id="newBadge">Nouveau</span>
        </button>

        <button class="btn secondary" id="promoBtn" style="display:none">
          Code promo
          <span class="badge-new" id="promoBadge">Nouveau</span>
        </button>
      </div>
    </div>
  </main>

  <!-- Toast -->
  <div class="toast" id="toast">‚úÖ Ap√©ro de Nuit 66¬Æ est ajout√© √† ton √©cran d‚Äôaccueil !</div>

  <!-- Modale help install -->
  <div class="modal" id="helpModal" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
    <div class="sheet">
      <div class="sheetHead">
        <div class="sheetIcon" id="helpIcon">üì≤</div>
        <div>
          <h3 id="helpTitle">Installer l‚Äôapp</h3>
          <p id="helpIntro"></p>
        </div>
      </div>

      <div class="step" id="helpSteps"></div>
      <div class="copied" id="copiedMsg">‚úÖ Lien copi√©</div>

      <div class="modalActions">
        <button class="copyBtn" id="copyLinkBtn" style="display:none">Copier le lien</button>
        <button class="okBtn" id="closeHelp">OK</button>
      </div>
    </div>
  </div>

  <!-- üîû AGE GATE -->
  <div class="ageOverlay" id="ageQuestion" role="dialog" aria-modal="true">
    <div class="ageCard">
      <div class="ageTop">
        <div class="ageBrand">
          <div class="ageBadge">AD</div>
          <b>AP√âRO DE NUIT¬Æ</b>
        </div>
      </div>
      <div class="ageBody">
        <div class="ageTitle">Bienvenue ‚ú®</div>
        <p class="ageLead">
          Ce site pr√©sente des boissons alcoolis√©es. Pour continuer, confirme que tu as l‚Äô√¢ge l√©gal.
        </p>
        <div class="ageNotice">
          <b>La vente d‚Äôalcool est interdite aux mineurs.</b><br>
          L‚Äôabus d‚Äôalcool est dangereux pour la sant√©, √† consommer avec mod√©ration.
        </div>
        <div class="ageBtns">
          <button class="ageBtn ageBtnPrimary" id="ageYes">‚úÖ Je suis majeur</button>
          <button class="ageBtn ageBtnSecondary" id="ageNo">‚ÑπÔ∏è Je ne suis pas majeur</button>
        </div>
        <div class="ageFine">üîí Choix m√©moris√© sur cet appareil.</div>
      </div>
    </div>
  </div>

  <div class="ageOverlay" id="ageBlocked" role="dialog" aria-modal="true">
    <div class="ageCard">
      <div class="ageTop">
        <div class="ageBrand">
          <div class="ageBadge">18+</div>
          <b>ACC√àS R√âSERV√â</b>
        </div>
      </div>
      <div class="ageBody">
        <div class="ageTitle">Acc√®s r√©serv√© üîû</div>
        <p class="ageLead">
          Ce contenu est strictement r√©serv√© aux personnes majeures.<br>
          La vente d‚Äôalcool est interdite aux mineurs.
        </p>
        <div class="ageNotice">
          Pour acc√©der au contenu, une v√©rification d‚Äô√¢ge est obligatoire.
        </div>
        <div class="ageFine">
          Si tu penses √™tre bloqu√© par erreur, contacte Ap√©ro de Nuit¬Æ (06.52.33.64.61)
          ou <a href="mailto:contact@aperos.net">contact@aperos.net</a>.
        </div>
        <div class="ageFine" style="margin-top:10px;">
          L‚Äôabus d‚Äôalcool est dangereux pour la sant√©.
        </div>
      </div>
    </div>
  </div>

  <script>
    /* =========================
       ‚è≥ SPLASH LOADER JS (AJOUT)
       - 2.5s minimum
       - ne supprime rien du reste
       ========================= */
    (function(){
      const splash = document.getElementById("splashLoader");
      const fill = document.getElementById("splashFill");
      if(!splash || !fill) return;

      const DURATION = 2500;
      const start = performance.now();
      let done = false;

      function animate(){
        const t = performance.now() - start;
        const p = Math.min(1, t / DURATION);
        const eased = 1 - Math.pow(1 - p, 2.2);
        fill.style.width = Math.round(eased * 100) + "%";
        if(p < 1) requestAnimationFrame(animate);
      }
      requestAnimationFrame(animate);

      function hide(){
        if(done) return;
        done = true;
        fill.style.width = "100%";
        splash.classList.add("hide");
        setTimeout(() => {
          try { splash.remove(); } catch(e){ splash.style.display = "none"; }
        }, 360);
      }

      setTimeout(hide, DURATION);
    })();

    // ‚úÖ Service worker (cache-bust)
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./service-worker.js?v=20260101").catch(() => {});
      });
    }

    // D√©filement bouteilles (2s)
    const imgs = document.querySelectorAll("#bottles img");
    let idx = 0;
    if (imgs.length > 1) {
      setInterval(() => {
        imgs[idx].classList.remove("active");
        idx = (idx + 1) % imgs.length;
        imgs[idx].classList.add("active");
      }, 2000);
    }

    // D√©tections
    const ua = navigator.userAgent || "";
    const isFBInApp = /FBAN|FBAV|FB_IAB|FB4A|FB4i|Instagram/i.test(ua);
    const isIOS = /iPhone|iPad|iPod/i.test(ua);
    const isSafari = /^((?!chrome|android).)*safari/i.test(ua);

    // PWA prompt Android/Chrome
    let deferredPrompt = null;
    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      deferredPrompt = e;
      updateInstallUI();
    });

    // Toast
    const toastEl = document.getElementById("toast");
    function showToast(msg){
      if(msg) toastEl.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(showToast._t);
      showToast._t = setTimeout(() => toastEl.classList.remove("show"), 3600);
    }

    

    // =========================
    // üìà TRACKING (stats.aperos.net) ‚Äî discret, sans redirection
    // =========================
    const PLAY_STORE_URL = "https://play.google.com/store/apps/details?id=fr.aperos.nuit66";
    const ORDER_URL = "https://www.aperodenuit.com/commander";

    function openOrder(){
      const run = () => {
        try{
          if (typeof isStandalone === "function" && isStandalone()){
            // ‚úÖ PWA / App: ouverture directe (sans onglet)
            window.location.replace(ORDER_URL);
          } else {
            // ‚úÖ Site: onglet s√©par√©
            window.open(ORDER_URL, "_blank", "noopener");
          }
        } catch(e){
          try{ window.location.href = ORDER_URL; } catch(_e){}
        }
      };

      if (typeof requireMajorThen === "function"){
        requireMajorThen(() => { run(); });
      } else {
        run();
      }
    }


    const TRACK = {
      call: "https://stats.aperos.net/e/apero_nuit.call?to=tel%3A0652336461&src=app",
      appClick: "https://stats.aperos.net/e/apero_nuit.app.click?to=https%3A%2F%2Faperos.net&src=app"
    };

    function fireTrack(url){
      if(!url) return;
      // 1) Beacon (le plus discret)
      try{
        if (navigator.sendBeacon) {
          const ok = navigator.sendBeacon(url);
          if (ok) return;
        }
      }catch(e){}
      // 2) Fetch no-cors (ne navigue pas)
      try{
        fetch(url, { mode:"no-cors", keepalive:true, credentials:"omit" }).catch(()=>{});
        return;
      }catch(e){}
      // 3) Image beacon (fallback)
      try{
        const img = new Image();
        img.referrerPolicy = "no-referrer";
        img.src = url + (url.includes("?") ? "&" : "?") + "_t=" + Date.now();
      }catch(e){}
    }

    // Tracking auto des clics "tel:" (bouton appeler / liens)
    document.addEventListener("click", (e) => {
      const t = e.target;
      if(!t || !t.closest) return;
      const telLink = t.closest('a[href^="tel:"]');
      const callLike = t.closest("#callBtn,[data-call],[data-action='call']");
      if (telLink || callLike) fireTrack(TRACK.call);
    }, true);

    // ‚úÖ Standalone (PWA)
    function isStandalone(){
      return window.matchMedia("(display-mode: standalone)").matches
        || window.navigator.standalone === true; // iOS
    }

    // ===============================
    // ‚úÖ LOGIQUE INSTALL "FIABLE"
    // ===============================
    const INSTALL = {
      key: "pwa_installed_flag",
      relatedAppsChecked: false,
      relatedAppsInstalled: null, // true/false/null
    };

    function setInstalledFlag(val){ localStorage.setItem(INSTALL.key, val ? "1" : "0"); }
    function getInstalledFlag(){ return localStorage.getItem(INSTALL.key) === "1"; }

    async function checkInstalledRelatedApps(){
      if (typeof navigator.getInstalledRelatedApps !== "function") {
        INSTALL.relatedAppsChecked = true;
        INSTALL.relatedAppsInstalled = null;
        return null;
      }
      try{
        const apps = await navigator.getInstalledRelatedApps();
        INSTALL.relatedAppsChecked = true;
        INSTALL.relatedAppsInstalled = Array.isArray(apps) && apps.length > 0;
        return INSTALL.relatedAppsInstalled;
      }catch(e){
        INSTALL.relatedAppsChecked = true;
        INSTALL.relatedAppsInstalled = null;
        return null;
      }
    }

    function applyInstallUI(isInstalled){
      const installBtn = document.getElementById("installBtn");
      const badge = document.getElementById("newBadge");
      if(!installBtn) return;

      if (isInstalled) {
        installBtn.style.display = "none";
      } else {
        installBtn.style.display = "block";
        installBtn.classList.add("pulse");
        if (badge) badge.style.display = "inline-block";
      }
    }

    async function updateInstallUI(){
      if (isStandalone()) {
        setInstalledFlag(true);
        applyInstallUI(true);
        return;
      }

      const related = await checkInstalledRelatedApps();
      if (related === true) {
        setInstalledFlag(true);
        applyInstallUI(true);
        return;
      }
      if (related === false) {
        setInstalledFlag(false);
        applyInstallUI(false);
        return;
      }

      const flag = getInstalledFlag();
      applyInstallUI(flag);

      if (deferredPrompt) {
        setInstalledFlag(false);
        applyInstallUI(false);
      }
    }

    updateInstallUI();
    document.addEventListener("visibilitychange", () => {
      if (document.visibilityState === "visible") updateInstallUI();
    });

    window.addEventListener("appinstalled", () => {
      fireTrack(TRACK.appClick);
      setInstalledFlag(true);
      showToast("üéâ Ap√©ro de Nuit est ajout√© √† ton √©cran d‚Äôaccueil !");
      updateInstallUI();
    });

    /* =========================
       üîû AGE GATE (48h silencieuses) ‚Äî localStorage + cookie fallback
       ========================= */
    const AGE = {
      KEY_MAJOR_UNTIL: "adn_major_until",
      KEY_LAST: "adn_last_choice",
      KEY_MINOR_UNTIL: "adn_minor_until",
      MAJOR_MS: 20 * 24 * 60 * 60 * 1000, // 20 jours
      MINOR_MS: 48 * 60 * 60 * 1000,      // 48h
      // garder l'URL (ne sert plus ici), pour futur si besoin
      commanderUrl: "https://aperodenuit.com/commander"
    };

    const ageQuestion = document.getElementById("ageQuestion");
    const ageBlocked  = document.getElementById("ageBlocked");
    const ageYes      = document.getElementById("ageYes");
    const ageNo       = document.getElementById("ageNo");

    let agePendingAction = null;
    let ageInterval = null;

    function ageNow(){ return Date.now(); }

    function storageAvailable(){
      try{
        const k="__t";
        localStorage.setItem(k,"1");
        localStorage.removeItem(k);
        return true;
      }catch(e){
        return false;
      }
    }
    const CAN_LS = storageAvailable();

    function cookieSet(name, value, maxAgeSeconds){
      const v = encodeURIComponent(String(value));
      const max = Number.isFinite(maxAgeSeconds) ? `; Max-Age=${Math.max(0, Math.floor(maxAgeSeconds))}` : "";
      document.cookie = `${name}=${v}${max}; Path=/; SameSite=Lax`;
    }
    function cookieGet(name){
      const m = document.cookie.match(new RegExp('(?:^|; )' + name.replace(/[-[\]/{}()*+?.\\^$|]/g, '\\$&') + '=([^;]*)'));
      return m ? decodeURIComponent(m[1]) : null;
    }
    function cookieDel(name){
      document.cookie = `${name}=; Max-Age=0; Path=/; SameSite=Lax`;
    }

    function storeSetInt(key, n, maxAgeSeconds){
      if (CAN_LS){
        try { localStorage.setItem(key, String(n)); return; } catch(e){}
      }
      cookieSet(key, String(n), maxAgeSeconds);
    }
    function storeGetInt(key){
      let v = null;
      if (CAN_LS){
        try { v = localStorage.getItem(key); } catch(e){ v = null; }
      }
      if (v === null) v = cookieGet(key);
      const n = v ? parseInt(v, 10) : 0;
      return Number.isFinite(n) ? n : 0;
    }
    function storeSetStr(key, s, maxAgeSeconds){
      if (CAN_LS){
        try { localStorage.setItem(key, String(s)); return; } catch(e){}
      }
      cookieSet(key, String(s), maxAgeSeconds);
    }
    function storeDel(key){
      if (CAN_LS){
        try { localStorage.removeItem(key); } catch(e){}
      }
      cookieDel(key);
    }

    function ageIsMajorValid(){ return storeGetInt(AGE.KEY_MAJOR_UNTIL) > ageNow(); }
    function ageIsMinorBlocked(){ return storeGetInt(AGE.KEY_MINOR_UNTIL) > ageNow(); }

    function ageShow(el){
      el.classList.add("show");
      document.documentElement.style.overflow = "hidden";
      document.body.style.overflow = "hidden";
    }
    function ageHide(el){
      el.classList.remove("show");
      if(!ageQuestion.classList.contains("show") && !ageBlocked.classList.contains("show")){
        document.documentElement.style.overflow = "";
        document.body.style.overflow = "";
      }
    }
    function ageShowQuestion(){
      ageHide(ageBlocked);
      ageShow(ageQuestion);
    }
    function ageShowBlocked(){
      ageHide(ageQuestion);
      ageShow(ageBlocked);

      if(ageInterval) clearInterval(ageInterval);

      const tick = () => {
        const until = storeGetInt(AGE.KEY_MINOR_UNTIL);
        if (until <= ageNow()){
          clearInterval(ageInterval);
          ageInterval = null;
          storeDel(AGE.KEY_MINOR_UNTIL);
          ageShowQuestion();
        }
      };

      tick();
      ageInterval = setInterval(tick, 1000);
    }

    function ageSetMajor(){
      storeSetStr(AGE.KEY_LAST, "major", 60*60*24*30);
      storeSetInt(AGE.KEY_MAJOR_UNTIL, ageNow() + AGE.MAJOR_MS, Math.floor(AGE.MAJOR_MS/1000));
      storeDel(AGE.KEY_MINOR_UNTIL);
    }
    function ageSetMinorBlock(){
      storeSetStr(AGE.KEY_LAST, "minor", 60*60*24*3);
      storeSetInt(AGE.KEY_MINOR_UNTIL, ageNow() + AGE.MINOR_MS, Math.floor(AGE.MINOR_MS/1000));
    }

    [ageQuestion, ageBlocked].forEach(o=>{
      o.addEventListener("click", (e)=>{ if(e.target === o){ /* rien */ } });
    });
    document.addEventListener("keydown", (e)=>{
      if((ageQuestion.classList.contains("show") || ageBlocked.classList.contains("show")) && e.key === "Escape"){
        e.preventDefault();
      }
    });

    function requireMajorThen(actionFn){
      if(ageIsMinorBlocked()){
        agePendingAction = null;
        ageShowBlocked();
        return;
      }
      if(ageIsMajorValid()){
        actionFn();
        return;
      }
      agePendingAction = actionFn;
      ageShowQuestion();
    }

    ageYes.addEventListener("click", ()=>{
      ageSetMajor();
      ageHide(ageQuestion);
      if(typeof agePendingAction === "function"){
        const fn = agePendingAction;
        agePendingAction = null;
        fn();
      }
    });

    ageNo.addEventListener("click", ()=>{
      ageSetMinorBlock();
      ageShowBlocked();
    });

    if(ageIsMinorBlocked()){
      ageShowBlocked();
    } else if(!ageIsMajorValid()){
      // ‚úÖ Demande l'√¢ge d√®s l'ouverture (site + PWA)
      ageShowQuestion();
    }
    // =========================
    // üéÅ PROMO
    // =========================
    const PROMO_URL = "https://stats.aperos.net/go/jeux?src=direct";
    const PROMO_REQUIRED_MS = 30000 ; // 30 secondes
    const PROMO_KEYS = {
      enabled: "promo_enabled",
      acc: "promo_acc_ms",
      visibleStart: "promo_visible_start",
      unlockedTs: "promo_unlocked_ts",
      expiryTs: "promo_expiry_ts",
      clicked: "promo_clicked"
    };

    function addMonths(ts, months){
      const d = new Date(ts);
      const day = d.getDate();
      d.setMonth(d.getMonth() + months);
      if (d.getDate() !== day) d.setDate(0);
      return d.getTime();
    }
    function lsGetInt(k, def=0){
      const v = localStorage.getItem(k);
      const n = v === null ? def : parseInt(v, 10);
      return Number.isFinite(n) ? n : def;
    }
    function lsGetBool(k){ return localStorage.getItem(k) === "1"; }
    function lsSetBool(k, val){ localStorage.setItem(k, val ? "1" : "0"); }

    function promoReset(){
      localStorage.removeItem(PROMO_KEYS.enabled);
      localStorage.removeItem(PROMO_KEYS.acc);
      localStorage.removeItem(PROMO_KEYS.visibleStart);
      localStorage.removeItem(PROMO_KEYS.unlockedTs);
      localStorage.removeItem(PROMO_KEYS.expiryTs);
      localStorage.removeItem(PROMO_KEYS.clicked);
    }
    function promoExpired(){
      const expiry = lsGetInt(PROMO_KEYS.expiryTs, 0);
      return expiry > 0 && Date.now() > expiry;
    }
    function promoIsUnlocked(){ return lsGetInt(PROMO_KEYS.unlockedTs, 0) > 0; }
    function promoIsEnabled(){ return lsGetBool(PROMO_KEYS.enabled); }

    function promoUpdateUI(){
      const promoBtn = document.getElementById("promoBtn");
      const promoBadge = document.getElementById("promoBadge");
      if (!promoBtn) return;

      if (promoExpired()) promoReset();

      const shouldShow =
        isStandalone() &&
        promoIsEnabled() &&
        promoIsUnlocked() &&
        !promoExpired();

      promoBtn.style.display = shouldShow ? "block" : "none";

      if (promoBadge){
        promoBadge.style.display = lsGetBool(PROMO_KEYS.clicked) ? "none" : "inline-block";
      }
    }

    function promoUnlockNow(){
      const now = Date.now();
      localStorage.setItem(PROMO_KEYS.unlockedTs, String(now));
      localStorage.setItem(PROMO_KEYS.expiryTs, String(addMonths(now, 4)));
      promoUpdateUI();
    }

    function promoStopSession(){
      const start = lsGetInt(PROMO_KEYS.visibleStart, 0);
      if (!start) return;
      const delta = Math.max(0, Date.now() - start);
      localStorage.removeItem(PROMO_KEYS.visibleStart);

      if (!promoIsEnabled() || promoIsUnlocked() || promoExpired()) return;

      const acc = lsGetInt(PROMO_KEYS.acc, 0) + delta;
      localStorage.setItem(PROMO_KEYS.acc, String(acc));

      if (acc >= PROMO_REQUIRED_MS) promoUnlockNow();
    }

    function promoStartSession(){
      if (!promoIsEnabled() || promoIsUnlocked() || promoExpired()) return;
      if (!isStandalone()) return;
      if (document.visibilityState !== "visible") return;

      const existing = lsGetInt(PROMO_KEYS.visibleStart, 0);
      if (!existing) localStorage.setItem(PROMO_KEYS.visibleStart, String(Date.now()));
    }

    // ‚ö†Ô∏è Promo kickoff conserv√© (mais ne sera jamais d√©clench√© sans "Commander")
    function promoKickoffAfterCommander(){
      if (!isStandalone()) return;

      if (promoExpired()) promoReset();

      if (!promoIsEnabled()){
        lsSetBool(PROMO_KEYS.enabled, true);
        localStorage.setItem(PROMO_KEYS.acc, "0");
        lsSetBool(PROMO_KEYS.clicked, false);
        localStorage.removeItem(PROMO_KEYS.visibleStart);
        localStorage.removeItem(PROMO_KEYS.unlockedTs);
        localStorage.removeItem(PROMO_KEYS.expiryTs);
      }
      promoStartSession();
    }

    document.addEventListener("visibilitychange", () => {
      if (document.visibilityState === "hidden") promoStopSession();
      if (document.visibilityState === "visible") promoStartSession();
      promoUpdateUI();
    });
    window.addEventListener("pagehide", promoStopSession);
    window.addEventListener("beforeunload", promoStopSession);

    const promoBtnEl = document.getElementById("promoBtn");
    if (promoBtnEl){
      promoBtnEl.addEventListener("click", () => {
        lsSetBool(PROMO_KEYS.clicked, true);
        promoUpdateUI();
        window.location.href = PROMO_URL;
      });
    }

    promoUpdateUI();
    promoStartSession();

    // Modale helpers
    const modal = document.getElementById("helpModal");
    const closeBtn = document.getElementById("closeHelp");
    const copyBtn = document.getElementById("copyLinkBtn");
    const copiedMsg = document.getElementById("copiedMsg");
    const intro = document.getElementById("helpIntro");
    const steps = document.getElementById("helpSteps");
    const title = document.getElementById("helpTitle");
    const icon = document.getElementById("helpIcon");

    function openModal({t="Installer l‚Äôapp", i="", s="", showCopy=false, ic="üì≤"}) {
      title.textContent = t;
      icon.textContent = ic;
      intro.innerHTML = i;
      steps.innerHTML = s;
      copyBtn.style.display = showCopy ? "inline-block" : "none";
      copiedMsg.style.display = "none";
      modal.classList.add("open");
    }
    closeBtn.addEventListener("click", () => modal.classList.remove("open"));
    modal.addEventListener("click", (e) => { if (e.target === modal) modal.classList.remove("open"); });

    copyBtn.addEventListener("click", async () => {
      try {
        await navigator.clipboard.writeText(window.location.href);
        copiedMsg.style.display = "block";
      } catch (e) {
        const tmp = document.createElement("textarea");
        tmp.value = window.location.href;
        document.body.appendChild(tmp);
        tmp.select();
        document.execCommand("copy");
        document.body.removeChild(tmp);
        copiedMsg.style.display = "block";
      }
    });

    // Click "T√©l√©charger l‚Äôapp" (Play Store)
    document.getElementById("installBtn").addEventListener("click", async () => {
      const run = () => {
        // tracking "T√©l√©charger l‚Äôapp"
        fireTrack(TRACK.appClick);

        // ‚úÖ D√©sormais: redirection Play Store (sans casser le reste)
        try {
          window.location.href = PLAY_STORE_URL;
        } catch(e) {
          window.open(PLAY_STORE_URL, "_blank", "noopener");
        }
      };

      if (typeof requireMajorThen === "function"){
        requireMajorThen(() => { run(); });
      } else {
        run();
      }
    });
// ‚úÖ ACTION PRINCIPALE: COMMANDE EN LIGNE
    const orderBtn = document.getElementById("orderBtn");
    if (orderBtn){
      orderBtn.addEventListener("click", () => {
        openOrder();
      });
    }
  </script>

    <!-- ADN66: Menu (top-right) + footer legal links -->
  <button class="adn-menu-btn" id="adnMenuBtn" type="button" aria-haspopup="dialog" aria-controls="adnMenuSheet" aria-expanded="false"><span class="adn-menu-label">Menus</span></button>

  <div class="adn-menu-backdrop" id="adnMenuBackdrop" aria-hidden="true"></div>

  <div class="adn-menu-sheet" id="adnMenuSheet" role="dialog" aria-modal="true" aria-label="Menu">
    <div class="adn-menu-item" id="adnMenuCall" data-call>
      <div class="adn-menu-left">
        <div class="adn-menu-title"><img src="assets/appel.png" class="adn-menu-icon" alt="">Commandez par appel</div>
      </div>
    </div>

    <div class="adn-menu-item" id="adnMenuOrder" style="--adn-icon:50px">
      <div class="adn-menu-left">
        <div class="adn-menu-title"><img src="assets/commande.png" class="adn-menu-icon caddie" alt="">Commandez en ligne</div>
        <div class="adn-menu-sub">Paiement en ligne</div>
      </div>
    </div>


    <div class="adn-menu-item" id="adnMenuTrack" style="display:none">
      <div class="adn-menu-left">
        <div class="adn-menu-title"><img src="assets/suivi.png" class="adn-menu-icon" alt="">Suivi livreur</div>
      </div>
      <span class="adn-tag">Nouveau</span>
    </div>

    <div class="adn-menu-item" id="adnMenuGame" style="display:none; --adn-icon:52px">
      <div class="adn-menu-left">
        <div class="adn-menu-title"><img src="assets/cadeaux.png" class="adn-menu-icon cadeaux" alt="">Cadeaux</div>
        <div class="adn-menu-sub">Gagne ta livraison</div>
      </div>
      <span class="adn-tag">Nouveau</span>
    </div>

    <div class="adn-menu-item" id="adnMenuInstall" style="display:none">
      <div class="adn-menu-left">
        <div class="adn-menu-title">‚¨áÔ∏è T√©l√©charger l‚Äôapp</div>
      </div>
    </div>

    <div class="adn-menu-item" id="adnMenuZone">
      <div class="adn-menu-left">
        <div class="adn-menu-title"><img src="assets/zone.png" class="adn-menu-icon" alt="">Zone de livraison</div>
      </div>
    </div>

    <div class="adn-menu-item" id="adnMenuClose">
      <div class="adn-menu-left">
        <div class="adn-menu-title">‚úñÔ∏è Fermer</div>
      </div>
    </div>
  </div>

  <footer class="adn-legal-footer" aria-label="Informations l√©gales">
    <a href="./privacy.html">Confidentialit√©</a>
    <span class="dot">‚Ä¢</span>
    <a href="./cgv.html">CGV</a>
    <span class="dot">‚Ä¢</span>
    <a href="./mentions.html">Mentions l√©gales</a>
  </footer>

<script id="adn66-menu-js">
    (function(){
      function isStandalone(){
        try{
          return window.matchMedia("(display-mode: standalone)").matches || window.navigator.standalone === true;
        }catch(e){ return false; }
      }

      const btn = document.getElementById("adnMenuBtn");
      const sheet = document.getElementById("adnMenuSheet");
      const back = document.getElementById("adnMenuBackdrop");
      const closeBtn = document.getElementById("adnMenuClose");

      function openMenu(){
        if(!sheet || !back || !btn) return;
        sheet.classList.add("open");
        back.classList.add("open");
        btn.setAttribute("aria-expanded","true");
      }
      function closeMenu(){
        if(!sheet || !back || !btn) return;
        sheet.classList.remove("open");
        back.classList.remove("open");
        btn.setAttribute("aria-expanded","false");
      }

      if(btn) btn.addEventListener("click", ()=>{ sheet && sheet.classList.contains("open") ? closeMenu() : openMenu(); });
      const zoneEl = document.getElementById("adnMenuZone");
      if(zoneEl){
        zoneEl.addEventListener("click", () => {
          closeMenu();
          if(typeof requireMajorThen === "function"){
            requireMajorThen(()=>{ window.location.href = "./zone_livraison.html"; });
          }else{
            window.location.href = "./zone_livraison.html";
          }
        });
      }

      if(closeBtn) closeBtn.addEventListener("click", closeMenu);
      if(back) back.addEventListener("click", closeMenu);

      // Visibility rules
      const track = document.getElementById("adnMenuTrack");
      const game = document.getElementById("adnMenuGame");
      const install = document.getElementById("adnMenuInstall");
      const standalone = isStandalone();

      if(track) track.style.display = standalone ? "flex" : "none";
      if(game) game.style.display = standalone ? "flex" : "none";
      if(install) install.style.display = standalone ? "none" : "flex"; // site only

      // Actions
      const call = document.getElementById("adnMenuCall");
      if(call){
        call.addEventListener("click", ()=>{
          closeMenu();
          if(typeof requireMajorThen === "function"){
            requireMajorThen(()=>{ window.location.href = "tel:0652336461"; });
          }else{
            window.location.href = "tel:0652336461";
          }
        });
      }

      const order = document.getElementById("adnMenuOrder");
      if(order){
        order.addEventListener("click", ()=>{
          closeMenu();
          // ‚úÖ Commander en ligne
          if (typeof openOrder === "function") {
            openOrder();
          } else {
            const url = "https://www.aperodenuit.com/commander";
            if(typeof requireMajorThen === "function"){
              requireMajorThen(()=>{ window.location.replace(url); });
            }else{
              window.location.replace(url);
            }
          }
        });
      }


      if(game){
        game.addEventListener("click", ()=>{
          closeMenu();
          // ‚úÖ Onglet visible uniquement en PWA
          if(typeof requireMajorThen === "function"){
            requireMajorThen(()=>{ window.location.href = "./game/"; });
          }else{
            window.location.href = "./game/";
          }
        });
      }

      if(track){
        track.addEventListener("click", ()=>{
          closeMenu();
          if(typeof requireMajorThen === "function"){
            requireMajorThen(()=>{ window.location.href = "./suivi/client.html"; });
          }else{
            window.location.href = "./suivi/client.html";
          }
        });
      }

      if(install){
        install.addEventListener("click", ()=>{
          closeMenu();
          const run = () => {
            // tracking "T√©l√©charger l‚Äôapp"
            try{
              if (typeof fireTrack === "function" && typeof TRACK !== "undefined") fireTrack(TRACK.appClick);
            }catch(e){}
            // ‚úÖ D√©sormais: redirection Play Store
            try{
              window.location.href = PLAY_STORE_URL;
            }catch(e){
              window.open(PLAY_STORE_URL, "_blank", "noopener");
            }
          };
          if(typeof requireMajorThen === "function"){
            requireMajorThen(()=>{ run(); });
          }else{
            run();
          }
        });
      }
})();
  </script>
<footer class="legal-footer">
    <a href="./mentions.html">Mentions l√©gales</a>
    <span class="sep">‚Ä¢</span>
    <a href="./cgv.html">CGV</a>
    <span class="sep">‚Ä¢</span>
    <a href="./privacy.html">Confidentialit√©</a>
  </footer>

</body>
</html>

<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Offres & promotions – RGPD</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#00ffc8">
  <link rel="icon" href="assets/icons/icon-192x192.png">
  <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">

  <!-- Social -->
  <meta property="og:title" content="APERO DE NUIT 66">
  <meta property="og:description" content="Offres & promotions – Inscription RGPD">
  <meta property="og:image" content="assets/share-1200x630.jpg">

  <style>
    :root{
      --bg:#0a0a14;
      --txt:#f2f5ff;
      --muted:#aab2c8;
      --line:#23284a;
      --accent:#00ffc8;
      --accent2:#2f7bff;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      background:radial-gradient(1200px 800px at 20% 10%, #141a3a, var(--bg));
      color:var(--txt);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
    }

    .wrap{max-width:880px;margin:24px auto;padding:0 16px}

    /* ===== HEADER ===== */
    header{
      display:flex;
      gap:14px;
      align-items:center;
      margin-bottom:16px
    }

    .logo{
      width:56px;
      height:60px; /* bande bleue descendue */
      border-radius:16px;
      background:linear-gradient(135deg, rgba(0,255,200,.25), rgba(47,123,255,.35));
      border:1px solid rgba(0,255,200,.3);
      display:grid;
      place-items:center;
      padding-bottom:6px; /* évite contact avec la queue */
      box-shadow:0 10px 30px rgba(0,0,0,.35)
    }

    .logo img{
      width:40px;
      height:40px
    }

    /* ===== BRAND ===== */
    .brand{
      font-size:22px;
      font-weight:900;
      letter-spacing:.5px;
    }

    .num{
      position:relative;
      display:inline-block;
      margin-left:2px;
    }

    .reg{
      position:absolute;
      top:-6px;
      right:-10px;
      font-size:10px;
      opacity:.75;
    }

    p{margin:6px 0;color:var(--muted);line-height:1.35}

    /* ===== CARD ===== */
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:18px;
      padding:18px;
      box-shadow:0 10px 35px rgba(0,0,0,.35)
    }

    label{display:block;margin:12px 0 6px;font-weight:700}

    input{
      width:100%;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:#0b0d1a;
      color:var(--txt);
    }

    .actions{
      display:flex;
      gap:10px;
      margin-top:14px;
      flex-wrap:wrap
    }

    button{
      padding:12px 16px;
      border-radius:14px;
      font-weight:900;
      cursor:pointer;
      border:0
    }

    .primary{
      background:linear-gradient(135deg, var(--accent), var(--accent2));
      color:#041015;
    }

    /* ===== INSTALL BUTTON FIX ===== */
    .ghost{
      background:rgba(255,255,255,.10);
      color:var(--txt);
      border:1px solid rgba(255,255,255,.3);
      backdrop-filter:blur(4px);
    }

    .ghost:hover{
      background:rgba(255,255,255,.16);
    }

    .msg{
      margin-top:12px;
      padding:10px 12px;
      border-radius:14px;
      display:none
    }

    .ok{
      background:rgba(33,197,93,.15);
      border:1px solid rgba(33,197,93,.4)
    }

    .err{
      background:rgba(255,77,77,.12);
      border:1px solid rgba(255,77,77,.4)
    }
  </style>
</head>

<body>
  <div class="wrap">

    <header>
      <div class="logo">
        <img src="assets/icons/icon-192x192.png" alt="Hibou Apéro de Nuit">
      </div>

      <div>
        <div class="brand">
          APERO DE NUIT
          <span class="num">66<span class="reg">®</span></span>
        </div>
        <p>Inscription RGPD – offres & promotions</p>
      </div>
    </header>

    <div class="card">
      <form id="rgpdForm">

        <label>Téléphone</label>
        <input placeholder="06…" />

        <label>Email</label>
        <input placeholder="ex: moi@email.com" />

        <div class="actions">
          <button class="primary" type="submit">Envoyer</button>
          <button class="ghost" id="installBtn" type="button" style="display:none">
            Installer l’app
          </button>
        </div>

        <div id="ok" class="msg ok">✅ Inscription enregistrée</div>
        <div id="err" class="msg err">❌ Erreur d’envoi</div>
      </form>
    </div>

  </div>

<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("./service-worker.js");
  }

  let deferredPrompt = null;
  const installBtn = document.getElementById("installBtn");

  window.addEventListener("beforeinstallprompt", (e) => {
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.display = "inline-block";
  });

  installBtn.addEventListener("click", async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    await deferredPrompt.userChoice;
    deferredPrompt = null;
    installBtn.style.display = "none";
  });
</script>

</body>
</html>
